"use strict";(self.webpackChunkCertyGet=self.webpackChunkCertyGet||[]).push([[92],{4092:(Q,h,a)=>{a.r(h),a.d(h,{UsuariosModule:()=>k});var g=a(6814),f=a(1896),v=a(5516),i=a(6223),c=a(9347),t=a(5879),Z=a(9862);let C=(()=>{class s{constructor(o){this.http=o,this.myAppUrl=v.N.endpoint,this.myApiUrlUser="/api/users/"}loadUser(){return this.http.get(`${this.myAppUrl}${this.myApiUrlUser}`)}addUsers(o){return this.http.post(`${this.myAppUrl}${this.myApiUrlUser}`,o)}deleteUsers(o){return this.http.delete(`${this.myAppUrl}${this.myApiUrlUser}/${o}`)}updateUsers(o,e){return this.http.put(`${this.myAppUrl}${this.myApiUrlUser}/${o}`,e)}static#t=this.\u0275fac=function(e){return new(e||s)(t.LFG(Z.eN))};static#o=this.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();var U=a(2939),m=a(2296),A=a(617),T=a(1274),d=a(9157),b=a(2032),y=a(3814),x=a(8525),N=a(3680);function P(s,p){if(1&s&&(t.TgZ(0,"mat-option",15),t._uU(1),t.qZA()),2&s){const o=p.$implicit;t.Q6J("value",o),t.xp6(1),t.hij(" ",o," ")}}let F=(()=>{class s{constructor(o,e,n,r,l){this.reference=o,this.userServices=e,this.formBuilder=n,this.snackBar=r,this.data=l,this.roles=["ADMIN","ESTUDIANTE"],this.title="",this.togglePassword=!0,this.title=l?"EDITAR USUARIO":"NUEVO USUARIO",this.isEdit=!!l,this.emp_form=this.formBuilder.group({id_usu:"",user_usu:"",pass_usu:"",rol_usu:""})}ngOnInit(){this.loadForm()}loadForm(){this.emp_form=this.formBuilder.group({id_usu:new i.NI(this.data?.id_usu),user_usu:new i.NI(this.data?.user_usu,i.kI.required),pass_usu:new i.NI("",i.kI.required),rol_usu:new i.NI(this.data?.rol_usu,i.kI.required)})}saveData(){this.emp_form.valid&&(this.data?this.userServices.updateUsers(this.data.id_usu,this.emp_form.value).subscribe(o=>{console.log("UPDATE: ",this.emp_form),this.showMessage("Registro actualizado correctamente"),this.reference.close()}):(console.log("SAVE: ",this.emp_form),this.userServices.addUsers(this.emp_form.value).subscribe(o=>{this.showMessage("Registro ingresado correctamente"),this.reference.close()})))}showMessage(o,e=5e3,n="Ok"){this.snackBar.open(o,n,{duration:e,verticalPosition:"top"})}static#t=this.\u0275fac=function(e){return new(e||s)(t.Y36(c.so),t.Y36(C),t.Y36(i.qu),t.Y36(U.ux),t.Y36(c.WI))};static#o=this.\u0275cmp=t.Xpm({type:s,selectors:[["cer-form"]],decls:36,vars:4,consts:[["mat-dialog-title",""],["fxLayout","","fxLayoutAlign","space-between center"],["mat-icon-button","","mat-dialog-close",""],[3,"formGroup","ngSubmit"],["mat-dialog-content","",1,"content"],[1,"row"],[1,"outline"],["matInput","","type","text","placeholder","Nombre de usuario","formControlName","user_usu"],["matSuffix",""],["matInput","","type","password","placeholder","Contrase\xf1a","formControlName","pass_usu"],["formControlName","rol_usu"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"action"],["mat-button","","color","primary","type","button","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"h3"),t._uU(3),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon"),t._uU(6,"close"),t.qZA()()()(),t.TgZ(7,"form",3),t.NdJ("ngSubmit",function(){return n.saveData()}),t.TgZ(8,"div",4)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Usuario"),t.qZA(),t._UZ(13,"input",7),t.TgZ(14,"mat-icon",8),t._uU(15,"account_box"),t.qZA()()(),t.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),t._uU(19,"Contrase\xf1a"),t.qZA(),t._UZ(20,"input",9),t.TgZ(21,"mat-icon",8),t._uU(22,"lock"),t.qZA()()(),t.TgZ(23,"div",5)(24,"mat-form-field",6)(25,"mat-label"),t._uU(26," Rol "),t.qZA(),t.TgZ(27,"mat-select",10),t.YNc(28,P,2,2,"mat-option",11),t.qZA(),t.TgZ(29,"mat-icon",8),t._uU(30,"category"),t.qZA()()()(),t.TgZ(31,"div",12)(32,"button",13),t._uU(33," Cancelar "),t.qZA(),t.TgZ(34,"button",14),t._uU(35," Grabar "),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(n.title),t.xp6(4),t.Q6J("formGroup",n.emp_form),t.xp6(21),t.Q6J("ngForOf",n.roles),t.xp6(6),t.Q6J("disabled",n.emp_form.invalid))},dependencies:[g.sg,m.lW,m.RK,A.Hw,T.Ye,c.ZT,c.uh,c.xY,c.H8,d.KE,d.hX,d.R9,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,b.Nt,y.xw,y.Wh,x.gD,N.ey],styles:[".content[_ngcontent-%COMP%]{padding-top:10px}.row[_ngcontent-%COMP%]{display:flex;gap:15px}.action[_ngcontent-%COMP%]{padding:0 25px 20px}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}mat-toolbar[_ngcontent-%COMP%]{background:rgba(0,0,0,.8);color:#f5f5f5;border-bottom:1px solid #ccc;border-radius:0 60px 0 0}"]})}return s})();var I=a(8005),S=a(4860),D=a(2580),B=a(9711),M=a(2823),O=a(3471),J=a(2596),u=a(5313),R=a(1586);function E(s,p){1&s&&(t.TgZ(0,"th",7),t._uU(1,"Acciones"),t.qZA())}function L(s,p){if(1&s){const o=t.EpF();t.TgZ(0,"td",8)(1,"button",9),t.NdJ("click",function(){const r=t.CHM(o).$implicit,l=t.oxw();return t.KtG(l.openForm(r))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",10),t.NdJ("click",function(){const r=t.CHM(o).$implicit,l=t.oxw();return t.KtG(l.delete(r.id_usu))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}const Y=[{path:"",component:(()=>{class s{constructor(o,e,n,r){this.bottomSheet=o,this.dialog=e,this.snackBar=n,this.usuariosService=r,this.data=[],this.metaDataColumns=[{field:"id_usu",title:"ID"},{field:"user_usu",title:"Usuario"},{field:"pass_usu",title:"Contrase\xf1a"},{field:"rol_usu",title:"Rol"}],this.rol=[],this.keypadButtons=[{icon:"add",tooltip:"AGREGAR",color:"primary",action:"NEW"}],this.totalRecords=this.data.length,this.loadUsers()}changePage(o){const e=v.N.PAGE_SIZE,n=e*o;this.data=this.data.slice(n,n+e),console.log("aqui",this.data)}loadUsers(){this.usuariosService.loadUser().subscribe(o=>{console.log("HOLA  :  ",o.data),this.data=o.data,this.totalRecords=this.data.length,this.changePage(0)})}doAction(o){switch(o){case"DOWNLOAD":break;case"NEW":this.openForm()}}showBottonSheet(o,e,n,r){}openForm(o=null){this.dialog.open(F,{panelClass:"panel-container",disableClose:!0,data:o}).afterClosed().subscribe(r=>{this.loadUsers()})}delete(o){console.log(o),this.usuariosService.deleteUsers(o).subscribe(e=>{console.log(e),this.loadUsers()})}static#t=this.\u0275fac=function(e){return new(e||s)(t.Y36(I.ch),t.Y36(c.uw),t.Y36(U.ux),t.Y36(C))};static#o=this.\u0275cmp=t.Xpm({type:s,selectors:[["cer-page-list"]],decls:9,vars:4,consts:[[1,"heightMaxScrollBar"],[3,"data","metaDataColumns"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","alignButton",4,"matCellDef"],[3,"length","onChangePage"],[3,"keypadButtons","onClick"],["mat-header-cell",""],["mat-cell","",1,"alignButton"],["mat-icon-button","","color","primary","matTooltip","EDITAR",3,"click"],["mat-icon-button","","color","accent","matTooltip","ELIMINAR",3,"click"]],template:function(e,n){1&e&&(t._UZ(0,"cer-title"),t.TgZ(1,"cer-container")(2,"ng-scrollbar",0)(3,"cer-table",1),t.ynx(4,2),t.YNc(5,E,2,0,"th",3),t.YNc(6,L,7,0,"td",4),t.BQk(),t.qZA()(),t.TgZ(7,"cer-paginator",5),t.NdJ("onChangePage",function(l){return n.changePage(l)}),t.qZA()(),t.TgZ(8,"cer-keypad-button",6),t.NdJ("onClick",function(l){return n.doAction(l)}),t.qZA()),2&e&&(t.xp6(3),t.Q6J("data",n.data)("metaDataColumns",n.metaDataColumns),t.xp6(4),t.Q6J("length",n.totalRecords),t.xp6(1),t.Q6J("keypadButtons",n.keypadButtons))},dependencies:[S.r,D.e,B.a,M.KC,m.RK,A.Hw,O.o,J.gM,u.fO,u.w1,u.Dz,u.ge,u.ev,R.J],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return s})()}];let $=(()=>{class s{static#t=this.\u0275fac=function(e){return new(e||s)};static#o=this.\u0275mod=t.oAB({type:s});static#e=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(Y),f.Bz]})}return s})();var G=a(2820);let k=(()=>{class s{static#t=this.\u0275fac=function(e){return new(e||s)};static#o=this.\u0275mod=t.oAB({type:s});static#e=this.\u0275inj=t.cJS({imports:[g.ez,$,G.m]})}return s})()}}]);