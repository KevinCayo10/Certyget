"use strict";(self.webpackChunkCertyGet=self.webpackChunkCertyGet||[]).push([[193],{193:(Y,h,n)=>{n.r(h),n.d(h,{CategoriasModule:()=>S});var x=n(6814),u=n(1896),i=n(6223),l=n(9347),t=n(5879),p=n(9862);let f=(()=>{class o{constructor(e){this.http=e,this.baseUrl="http://localhost:3000"}getCategorias(){return this.http.get(`${this.baseUrl}/`)}getCategoriaById(e){return this.http.get(`${this.baseUrl}/${e}`)}createCategoria(e){return this.http.post(`${this.baseUrl}/`,e)}updateCategoria(e,a){return this.http.put(`${this.baseUrl}/${e}`,a)}deleteCategoria(e){return this.http.delete(`${this.baseUrl}/${e}`)}static#t=this.\u0275fac=function(a){return new(a||o)(t.LFG(p.eN))};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var C=n(2939),d=n(2296),v=n(617),y=n(1274),g=n(9157),Z=n(2032),b=n(3814);let A=(()=>{class o{constructor(e,a,r,s,c){this.reference=e,this.categoriasService=a,this.formBuilder=r,this.snackBar=s,this.data=c,this.title="",this.title=c?"EDITAR CATEGOR\xcdA":"NUEVA CATEGOR\xcdA",this.isEdit=!!c,this.emp_form=this.formBuilder.group({id_cate:"",nom_cate:"",desc_cate:""})}ngOnInit(){this.loadForm()}loadForm(){this.emp_form=this.formBuilder.group({id_cate:new i.NI(this.data?.id_cate),nom_cate:new i.NI(this.data?.nom_cate,[i.kI.required]),desc_cate:new i.NI(this.data?.desc_cate,i.kI.required)})}saveData(){this.emp_form.valid&&(this.isEdit?this.categoriasService.updateCategoria(this.data.id_cate,this.emp_form.value).subscribe({next:e=>{console.log(e),this.showMessage("Categor\xeda actualizada correctamente"),this.reference.close()},error:e=>this.showMessage("Error al actualizar la categor\xeda")}):this.categoriasService.createCategoria(this.emp_form.value).subscribe({next:e=>{this.showMessage("Categor\xeda creada correctamente"),this.reference.close()},error:e=>this.showMessage("Error al crear la categor\xeda")}))}showMessage(e,a=5e3,r="Ok"){this.snackBar.open(e,r,{duration:a,verticalPosition:"top"})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(l.so),t.Y36(f),t.Y36(i.qu),t.Y36(C.ux),t.Y36(l.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cer-form"]],decls:28,vars:3,consts:[["mat-dialog-title",""],["fxLayout","","fxLayoutAlign","space-between center"],["mat-icon-button","","mat-dialog-close",""],[3,"formGroup","ngSubmit"],["mat-dialog-content","",1,"content"],[1,"row"],[1,"outline"],["matInput","","type","text","placeholder","Nombre","formControlName","nom_cate"],["matSuffix",""],["matInput","","type","textarea","placeholder","Descripci\xf3n","formControlName","desc_cate",1,"fixed-height-textarea"],["mat-dialog-actions","",1,"action"],["mat-button","","color","primary","type","button","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0)(1,"mat-toolbar",1)(2,"h3"),t._uU(3),t.qZA(),t.TgZ(4,"button",2)(5,"mat-icon"),t._uU(6,"close"),t.qZA()()()(),t.TgZ(7,"form",3),t.NdJ("ngSubmit",function(){return r.saveData()}),t.TgZ(8,"div",4)(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Nombre"),t.qZA(),t._UZ(13,"input",7),t.TgZ(14,"mat-icon",8),t._uU(15,"text_fields"),t.qZA()()(),t.TgZ(16,"div",5)(17,"mat-form-field",6)(18,"mat-label"),t._uU(19,"Descripci\xf3n"),t.qZA(),t._UZ(20,"textarea",9),t.TgZ(21,"mat-icon",8),t._uU(22,"description"),t.qZA()()()(),t.TgZ(23,"div",10)(24,"button",11),t._uU(25," Cancelar "),t.qZA(),t.TgZ(26,"button",12),t._uU(27," Grabar "),t.qZA()()()),2&a&&(t.xp6(3),t.Oqu(r.title),t.xp6(4),t.Q6J("formGroup",r.emp_form),t.xp6(19),t.Q6J("disabled",r.emp_form.invalid))},dependencies:[d.lW,d.RK,v.Hw,y.Ye,l.ZT,l.uh,l.xY,l.H8,g.KE,g.hX,g.R9,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,Z.Nt,b.xw,b.Wh],styles:[".content[_ngcontent-%COMP%]{padding-top:10px;height:auto}.row[_ngcontent-%COMP%]{display:flex;gap:15px}mat-form-field[_ngcontent-%COMP%]{width:100%}.action[_ngcontent-%COMP%]{padding:0 25px 20px}.action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}mat-toolbar[_ngcontent-%COMP%]{background:rgba(0,0,0,.8);color:#f5f5f5;border-bottom:1px solid #ccc;border-radius:0 60px 0 0}.fixed-height-textarea[_ngcontent-%COMP%]{height:65px}textarea[_ngcontent-%COMP%]{resize:none}"]})}return o})();var T=n(5516),M=n(4860),P=n(2580),N=n(9711),B=n(2823),E=n(3471),O=n(2596),m=n(5313),U=n(1586);function I(o,L){1&o&&(t.TgZ(0,"th",7),t._uU(1,"Acciones"),t.qZA())}function F(o,L){if(1&o){const e=t.EpF();t.TgZ(0,"td",8)(1,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.openForm(s))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.delete(s.id_cate))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}const D=[{path:"",component:(()=>{class o{constructor(e,a,r){this.dialog=e,this.categoriasService=a,this.snackBar=r,this.data=[],this.metaDataColumns=[{field:"id_cate",title:"ID"},{field:"nom_cate",title:"NOMBRE"},{field:"desc_cate",title:"DESCRIPCION"}],this.keypadButtons=[{icon:"add",tooltip:"AGREGAR",color:"primary",action:"NEW"}],this.totalRecords=0}ngOnInit(){this.loadCategory()}changePage(e){const a=T.N.PAGE_SIZE,r=a*e;this.categoriasService.getCategorias().subscribe({next:s=>{this.data=s.data.slice(r,r+a),this.totalRecords=s.data.length},error:s=>this.showMessage("Error al cargar las categor\xedas")})}loadCategory(){this.changePage(0)}doAction(e){switch(e){case"DOWNLOAD":break;case"NEW":this.openForm();break;default:this.showMessage("Acci\xf3n no reconocida")}}openForm(e=null){this.dialog.open(A,{width:"auto",data:e}).afterClosed().subscribe(r=>{this.loadCategory()})}delete(e){this.categoriasService.deleteCategoria(e).subscribe({next:a=>{this.showMessage("Categor\xeda eliminada correctamente"),this.loadCategory()},error:a=>this.showMessage("Error al eliminar la categor\xeda")})}showMessage(e,a=3e3,r="Cerrar"){this.snackBar.open(e,r,{duration:a,verticalPosition:"top"})}static#t=this.\u0275fac=function(a){return new(a||o)(t.Y36(l.uw),t.Y36(f),t.Y36(C.ux))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["cer-page-list"]],decls:9,vars:4,consts:[[1,"heightMaxScrollBar"],[3,"data","metaDataColumns"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","alignButton",4,"matCellDef"],[3,"length","onChangePage"],[3,"keypadButtons","onClick"],["mat-header-cell",""],["mat-cell","",1,"alignButton"],["mat-icon-button","","color","primary","matTooltip","EDITAR",3,"click"],["mat-icon-button","","color","accent","matTooltip","ELIMINAR",3,"click"]],template:function(a,r){1&a&&(t._UZ(0,"cer-title"),t.TgZ(1,"cer-container")(2,"ng-scrollbar",0)(3,"cer-table",1),t.ynx(4,2),t.YNc(5,I,2,0,"th",3),t.YNc(6,F,7,0,"td",4),t.BQk(),t.qZA()(),t.TgZ(7,"cer-paginator",5),t.NdJ("onChangePage",function(c){return r.changePage(c)}),t.qZA()(),t.TgZ(8,"cer-keypad-button",6),t.NdJ("onClick",function(c){return r.doAction(c)}),t.qZA()),2&a&&(t.xp6(3),t.Q6J("data",r.data)("metaDataColumns",r.metaDataColumns),t.xp6(4),t.Q6J("length",r.totalRecords),t.xp6(1),t.Q6J("keypadButtons",r.keypadButtons))},dependencies:[M.r,P.e,N.a,B.KC,d.RK,v.Hw,E.o,O.gM,m.fO,m.w1,m.Dz,m.ge,m.ev,U.J],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})}return o})()}];let R=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#a=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(D),u.Bz]})}return o})();var J=n(2820);let S=(()=>{class o{static#t=this.\u0275fac=function(a){return new(a||o)};static#e=this.\u0275mod=t.oAB({type:o});static#a=this.\u0275inj=t.cJS({imports:[x.ez,R,J.m,p.JF]})}return o})()}}]);